# 네트워크 스터디 요약 - 3주차

## 1. HTTP와 TCP/UDP

### HTTP의 계층 구조
- **TCP**: L4 전송 계층
- **HTTP**: L7 애플리케이션 계층
- HTTP는 TCP 프로토콜 위에서 동작

### HTTP 버전별 프로토콜
- **HTTP 1.1, 2.0**: TCP 기반
- **HTTP 3.0**: UDP 기반 (QUIC 프로토콜 사용)

---

## 2. HTTP 요청 메서드

### GET vs POST

| 항목 | GET | POST |
|------|-----|------|
| 목적 | 리소스 조회 | 리소스 생성 |
| 바디 사용 | ✗ | ✓ |
| 멱등성 | ✓ (있음) | ✗ (없음) |
| 브라우저 히스토리 | ✓ (남음) | ✗ (안 남음) |
| 데이터 노출 | ✓ (URL에 노출) | ✗ (바디에 숨김) |

### 멱등성(Idempotency)
- 같은 요청을 여러 번 보냈을 때 동일한 결과가 나타나는 특성
- GET: 멱등성 있음
- POST: 멱등성 없음
- DELETE: 멱등성 있음 (삭제되면 다시 삭제 불가, 하지만 동작은 동일)

### PUT vs PATCH

| 항목 | PUT | PATCH |
|------|-----|-------|
| 목적 | 리소스 전체 교체 | 리소스 부분 수정 |
| 멱등성 | ✓ (있음) | 구현에 따라 다름 |

**실무 팁**: 대부분 PUT이나 POST만 사용, PATCH는 잘 안 씀

---

## 3. HTTP 요청 헤더

### 주요 헤더들

**Referer (Referrer)**
- 요청을 보낸 이전 페이지의 URL
- 어디서 넘어온 요청인지 알 수 있음

**User-Agent**
- 클라이언트 브라우저, OS, 소프트웨어 정보
- 서버가 클라이언트 환경을 파악하는 데 사용

**Content-Type**
- 요청/응답 본문의 데이터 타입
- 예: application/json, text/html

**Accept**
- 클라이언트가 받을 수 있는 콘텐츠 타입
- 선호하는 언어, 인코딩 정보 포함

---

## 4. 쿠키(Cookie) vs 세션(Session)

### 기본 차이

| 항목 | 쿠키 | 세션 |
|------|------|------|
| 저장 위치 | 클라이언트 (브라우저) | 서버 |
| 저장 형태 | 파일 | 메모리/DB |
| 접근 가능 범위 | JS, 서버 모두 가능 | 서버만 가능 |
| 보안 | 낮음 (노출됨) | 높음 |
| 용도 | 자동 로그인, 설정값 | 로그인 상태 관리 |

### 동작 방식

**쿠키:**
1. 서버에서 Set-Cookie 헤더로 쿠키 생성
2. 브라우저가 쿠키 저장
3. 이후 요청마다 Cookie 헤더에 포함되어 전송

**세션:**
1. 서버에서 세션 생성
2. 세션 ID를 쿠키에 저장해서 클라이언트에 전송
3. 클라이언트는 세션 ID만 가지고 있음
4. 서버에서 세션 ID로 사용자 정보 조회

### 중요한 개념

**쿠키와 세션의 관계:**
- 쿠키: 저장 수단 (클라이언트 저장소)
- 세션: 상태 관리 방식 (서버에서 상태 유지)
- 쿠키에 세션 ID를 저장하는 것은 쿠키를 이용한 세션 관리일 뿐

**JWT와의 구분:**
- 쿠키/세션: 서버 중심 인증
- JWT: 토큰 기반 인증 (완전히 다른 개념)

---

## 5. CORS (Cross-Origin Resource Sharing)

### 오리진(Origin) 정의

**3가지 구성 요소:**
- 프로토콜 (HTTP, HTTPS)
- 도메인 (example.com, localhost)
- 포트 (3000, 8080)

**예시:**
- `http://localhost:3000` ≠ `http://localhost:8080` (포트 다름 = 다른 오리진)

### CORS 문제와 해결

**문제:**
- 브라우저는 보안상 다른 오리진 간의 통신을 차단

**해결 방법:**

1. **서버 설정 (Spring)**
   - Access-Control-Allow-Origin 헤더 설정
   - 허용할 HTTP 메서드 지정
   - 허용할 헤더 설정

2. **클라이언트 설정 (React)**
   - credentials: true (쿠키 포함)

**실무 예시:**
- 프론트엔드 (React): localhost:3000
- 백엔드 (Spring): localhost:8080
- → 포트가 다르므로 CORS 설정 필요

---

## 6. DNS (Domain Name System)

### DNS란?
- 도메인 네임을 IP 주소로 변환해주는 시스템
- 전화번호부처럼 이름으로 IP 주소를 찾는 방식

### DNS 조회 순서

```
브라우저 DNS 캐시 
→ OS 캐시 
→ 로컬 DNS 서버 
→ Root DNS 
→ TLD DNS 
→ Authoritative DNS
```

### 브라우저 주소창에 "google.com" 입력 후 과정

1. **DNS 조회**: google.com의 IP 주소 확인
2. **TCP 연결**: 3-way handshake로 연결 수립
3. **TLS/SSL 핸드셰이크**: HTTPS 암호화 설정
4. **HTTP 요청/응답**: 데이터 송수신
5. **렌더링**: HTML/CSS/JS 기반으로 화면 표시

---

## 7. CDN (Content Delivery Network)

### CDN이란?
- 전 세계로 분산된 서버 네트워크
- 사용자와 가장 가까운 서버에서 콘텐츠 제공

### 구조
- 서울, 부산, 도쿄, 미국 서부 등 여러 리전
- AWS CloudFront가 대표적인 CDN 서비스

### CDN의 장점

**1. 속도 향상**
- 물리적으로 가까운 서버에서 제공
- 네트워크 지연 시간 감소

**2. 트래픽 분산**
- 여러 서버에 부하 분산
- 전체 처리량 증가

**3. 고가용성**
- 특정 리전이 마비되어도 다른 리전에서 서비스 가능
- 재해 복구(Disaster Recovery)

**실무 예시:**
- 미국 서버 마비 → CDN으로 다른 리전에서 서비스 계속 제공

---

## 8. HTTP 2.0의 변화

### Connection 헤더 제거

**HTTP 1.1:**
- Connection 헤더로 연결 유지 여부 관리
- `Connection: Keep-Alive`

**HTTP 2.0:**
- 기본으로 연결 재사용 (keep-alive가 기본 동작)
- Connection 헤더는 deprecated (사용하지 말 것 권장)
- 헤더에서 제거됨

### HTTP 2.0의 주요 개선

- **멀티플렉싱**: 하나의 연결에서 여러 요청 동시 전송
- **헤더 압축**: 헤더 데이터 크기 감소
- **서버 푸시**: 서버가 먼저 리소스 전송

---

## 📝 면접 팁

### 답변 길이 조절
- 정의를 명확히 한 후 추가 질문을 기다리기
- 너무 길게 설명하면 "외운 느낌"
- 면접은 강연이 아닌 대화

**좋은 예:**
- "DNS는 도메인 네임을 IP 주소로 변환해주는 시스템입니다"
- (멈추고 면접관의 반응 기다리기)

**피할 것:**
- 미리 모든 것을 설명하기
- 자세한 과정까지 일일이 설명하기

### 모르는 것을 물어봤을 때
1. "모릅니다"가 낫지만 혼자 "외운" 느낌
2. 본인의 추론이나 유사한 경험 함께 언급
3. 완전히 다른 내용을 말하지 않기

---

## 핵심 정리

| 개념 | 핵심 |
|------|------|
| HTTP vs TCP | HTTP는 L7, TCP는 L4 |
| 쿠키 vs 세션 | 저장 위치 차이 (클라이언트 vs 서버) |
| GET vs POST | 멱등성, 바디 사용 여부 |
| CORS | 다른 오리진 간 통신 차단 → 설정으로 해결 |
| DNS | 도메인을 IP로 변환 |
| CDN | 분산된 서버로 빠른 제공 |
